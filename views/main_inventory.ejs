<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head'); -%>
</head>
<body>
    <div id="preloader">
        <div class="sk-three-bounce">
            <div class="sk-child sk-bounce1"></div>
            <div class="sk-child sk-bounce2"></div>
            <div class="sk-child sk-bounce3"></div>
        </div>
    </div>
    <div id="main-wrapper">
        <%- include('./partials/header_logo'); -%>
            <%- include('./partials/header',{titel: "Main Inventory"}); -%>
                <%- include('./partials/sidebar_sa'); -%>
                    <div class="content-body">
                        <div class="container-fluid">

                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h4 class="card-title col-6">Inventory</h4>
                                        </div>
                                        <div class="table-responsive">
                                            <table id="example1" class="table table-striped  table-responsive-sm">
                                                <thead>
                                                    <tr>
                                                        <th scope="col" class="text-center"><h5>Warehouse</h5></th>
                                                        <!-- <th scope="col" class="text-center"><h5>Rack</h5></th> -->
                                                        <th scope="col" class="text-center"><h5>Item Code</h5></th>
                                                        <th scope="col" class="text-center"><h5>Item Description</h5></th>
                                                        <!-- <th scope="col"><h5>Primary Code</h5></th>
                                                        <th scope="col"><h5>Secondary Code</h5></th>
                                                        <th scope="col"><h5>Production Date</h5></th>
                                                        <th scope="col"><h5>Expiry Date</h5></th> -->
                                                        <!-- <th scope="col"><h5>Location</h5></th> -->
                                                        <!-- <th scope="col"><h5>Bin</h5></th> -->
                                                        <th scope="col" class="text-center"><h5>Qty</h5></th>
                                                    </tr>
                                                </thead>
                                                <tbody id="dataInc">
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                </div>
                        </div>
                    </div>
                    <%- include('./partials/footer'); -%>
    </div>
    <%- include('./partials/toastr'); -%>
    <%- include('./partials/script'); -%>
    <script>

function dataShowInc(){
           

           $.ajax({
               url: '/main_inventory/table',
               method: 'POST',
               data: { isbool: "false" },
               success: function (response) {
                   var dataBody = document.getElementById("dataInc");
                //    let dataTableData = "";
                //    for (let x = 0; x < response.length; x++) {
                //        const data = response[x].product_list;
                //        dataTableData += "<tr>";
                //        dataTableData += "<td>" + data.product_code+ "</td>";
                //        dataTableData += "<td>" + data.product_name+ "</td>";
                //        dataTableData += "<td>" + data.primary_code+ "</td>";
                //        dataTableData += "<td>" + data.secondary_code+ "</td>";
                //        dataTableData += "<td>" + data.production_date+ "</td>";
                //        dataTableData += "<td>" + data.expiry_date+ "</td>";
                //        dataTableData += "<td>" + data.product_stock+ "</td>";
                //        dataTableData += "<td><button type='button' class='btn btn-primary btn-sm' onclick=\"isConfirmTrue('" + data._id + "')\">Confirm</button></td>";
                //        dataTableData += "</tr>";
                //        // console.log(data)
                //    }
                // console.log(response.length)
                
                let dataTableData = "";
                for (let x = 0; x <= response.length - 1; x++) {
                    const data = response[x];

                    dataTableData += "<tr>";
                    dataTableData += "<td class='text-center'>" + data._id.name+ "</td>";
                    // dataTableData += "<td class='text-center'>" + data._id.room+ "</td>";
                    dataTableData += "<td class='text-center'>" + data._id.product_code+ "</td>";
                    dataTableData += "<td class='text-center'>" + data.product_name+ "</td>";
                    dataTableData += "<td class='text-center'>" + data.product_stock+ "</td>";
                    dataTableData += "</tr>";
                    // console.log(data)
                    // for (let a = 0; a <= data.product_details.length - 1; a++) {
                    //     const dataDetl = data.product_details[a];
                    //     if(dataDetl.product_stock > 0){
                    //         dataTableData += "<tr>";
                    //         dataTableData += "<td>" + data.name+ "</td>";
                    //         dataTableData += "<td>" + data.room+ "</td>";
                    //         dataTableData += "<td>" + dataDetl.product_code+ "</td>";
                    //         dataTableData += "<td>" + dataDetl.product_name+ "</td>";
                    //         // dataTableData += "<td>" + dataDetl.primary_code+ "</td>";
                    //         // dataTableData += "<td>" + dataDetl.secondary_code+ "</td>";
                    //         // dataTableData += "<td>" + dataDetl.production_date+ "</td>";
                    //         // dataTableData += "<td>" + dataDetl.expiry_date+ "</td>";
                    //         // dataTableData += "<td>" + dataDetl.level+ "</td>";
                    //         // dataTableData += "<td>" + dataDetl.level + dataDetl.bay+ "</td>";
                    //         dataTableData += "<td>" + dataDetl.product_stock+ "</td>";
                    //         dataTableData += "</tr>";
                    //     }
                            
                    //     // console.log(dataDetl)

                    // }
                    // console.log(data.product_details)
                    
                }

                    
                   dataBody.innerHTML = dataTableData
               }
           });
        }
         $(document).ready(function() {
            dataShowInc()
            
         });
    </script>
</body>

</html>